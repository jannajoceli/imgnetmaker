<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ImgNetMaker</title>
  <link rel="icon" type="image/png" href="img/favicon.png" />

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <script src="js/util.js"></script>
  <script src="js/events.js"></script>
  <script src="js/model.js"></script>
  <script src="js/view.js"></script>
  <script src="js/app.js"></script>

  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/widgets.css">
  <link rel="stylesheet" href="css/flow.css">
</head>
<body>
  <div id="pageWidget" class="stage-start">

    <header>
      <a href="../index.html?mode=text">
        <img src="img/favicon.png" alt="Logo of ImgNetMaker" class="headerLogo">
        <h1 class="headerTitle">ImgNetMaker</h1>
      </a>
    </header>

    <section id="introWrapper">

      <div class="text-block">
        <p>
          <strong>ImgNetMaker</strong> converts a CSV file
          (with image URLs) or an image folder into image network-ready data for
          <a href="https://gephi.org/gephi-lite/" target="_blank" rel="noopener">Gephi Lite</a>
          (and similar tools) by downloading the images when a CSV is provided, pairing each image with its metadata, and adding two fields:
          a clean image filename and a Base64 data URL.
        </p>
        <!--p style="color:#7C00FF;">
        Yep ‚Äî zoom through 10,000-images in a snap. üë©üèª‚Äçüíª‚ú®‚ù£Ô∏è Heads-up: performance depends on your browser‚Äôs available memory (RAM).
        </p-->
      </div>

      <div id="thumbsWidget"></div>

    </section>

    <section id="fetchWrapper">

      <div id="fetchWidget">

        <div id="processCsvWrapper" class="inputWrapper hide show-mode-getimg show-stage-start show-stage-select">

          <div id="fetchWidgetSelectCsv" class="box">
            <label for="csvFile" class="button">Upload CSV</label>
            <input type="file" id="csvFile" accept=".csv">
            <span id="fileName"></span>
          </div>

          <div id="fetchWidgetColumn" class="box hide show-stage-select-column">
            <div class="input-wrapper input-wrapper-select">
              <label for="urlColumn">Select Image URL Column</label>
              <select id="urlColumn"></select>
            </div>
            <button id="fetchBtn" class="button-inline">Fetch Images</button>
          </div>

        </div>

        <div id="processFolderWrapper" class="inputWrapper hide show-mode-geturl show-stage-start show-stage-select">

          <div id="fetchWidgetSelectFolder" class="box">
            <label for="imgFolder" class="button">Upload Folder</label>
            <input type="file" id="imgFolder" webkitdirectory multiple>
          </div>

          <div id="fetchWidgetFolderColumn" class="box input-wrapper hide show-stage-select-column">
             <div class="input-wrapper input-wrapper-select hide">
                <label for="fileColumn">Select Image File Column: </label>
                <select id="fileColumn"></select>
             </div>
             <button id="extractBtn" class="button-inline">Extract Data Url</button>
          </div>

        </div>

        <div id="mergeCsvWrapper" class="inputWrapper hide">
          <div id="mergeWidgetSelectCsv" class="box">
            <label for="mergeCsvFile">Upload CSV</label>
            <input type="file" id="mergeCsvFile" accept=".csv">
            <span id="mergFileName"></span>
          </div>

          <div id="mergeWidgetColumn" class="box">
            <div class="input-wrapper input-wrapper-select">
              <label for="filenameColumn">Select Filename Column</label>
              <select id="filenameColumn"></select>
            </div>
            <button id="mergeBtn">Merge CSV</button>
          </div>

        </div>

        <div class="box hide show-stage-fetch">
          <div id="progressControls">
            <button id="stopBtn">Stop</button>
            <button id="showLogBtn">Show Error Log</button>
            <span id="progress"></span>
          </div>
        </div>

        <div class="box hide show-stage-ready">
          <button id="downloadZipBtn" class="button hide show-stage-ready-zip">Download ZIP</button>
          <button id="downloadCsvBtn" class="button hide show-stage-ready-csv">Download CSV</button>
          <button id="startOverBtn" class="button">Start Over</button>
        </div>
      </div>

    </section>

    <section id="dataWrapper" class="hide-stage-start">
      <div id="csvWrapper" class="tableWrapper hide show-stage-source-csv" >
        <table id="tableWidget" class="dataTable"></table>
      </div>

      <div id="folderWrapper" class="tableWrapper hide show-stage-source-folder">
        <table id="folderWidget" class="dataTable"></table>
      </div>

      <div id="logWidget" class="log-section">
        <div class="log-header">
          <h3>Error Log</h3>
          <button id="toggleLogBtn">Hide Log</button>
        </div>
        <div class="log-data"></div>
        </div>
    </section>

    <footer>
      <div id="footertext">
          <p class="hide-small">
            ImgNetMaker - Public Beta Version: v0.1.0-beta.
            <i class="fab fa-github" aria-hidden="true"></i>
            <a href="https://github.com/datavana/imgnetmkr" target="_blank">GitHub</a>
          </p>
        <p>
          Developed by the
          <a href="https://github.com/datavana/imgnetmkr?tab=readme-ov-file#contributions" class="accent">
            Net Image Research Initiative [NIRI]
          </a>
        </p>
      </div>
      <div id="inslogo">
        <img src="img/logo_ifk.svg" alt="Logo of the Institute of Communication, University of M√ºnster" class="headerLogo">
        <img src="img/logo_kc.svg" alt="Logo of King's college, London" class="headerLogo">
      </div>
    </footer>
  </div>
</body>
</html>
